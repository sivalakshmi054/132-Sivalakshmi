<script>
  
    function dragstart_handler(ev) {
        // Change the source element's background color to signify drag has started

        // Set the drag's format and data. Use the event target's id for the data 
        ev.dataTransfer.setData("text/html", "{"+ev.srcElement.innerHTML+"}");
        }
</script>
<div class="container">
    <div class="row">
        <div class="col-md-12">
           <div class="mainbody container-fluid" >
                   <p class="page-title">Question Bank - Hindi</p>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-init="QuestionBankLanguageSet(2);AcademicYearBasedCourseFunction();CourseBasedExamNameFunction();ExamBasedSubjectforAddmodal();ExamBasedSubjectforList()">
                            <div class="panel panel-default" id="QuestionBank">
                                    <div class="panel-body">
                                        <form class="form-horizontal" role="form">
                                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="formControlGroup">
                                                <tr>
                                                        <td width="12%">
                                                            <label>
                                                                    Academic Year
                                                                    <font class="mandatory-field" style="color: red;">*</font></label>
                                                        </td>
                                                        <td width="15%">
                                                        <select ng-model="QBAcademicYearId"  class="form-control" ng-required="true"ng-change="AcademicYearBasedCourseFunction();CourseClearFunction()">
                                                        <option value="0">Select</option>
                                                        <option ng-repeat="sel in AcademicYearList" ng-selected="QBAcademicYearId==sel.id" value="{{sel.id}}">{{sel.academicyear}}</option>
                                                        </select>
                                                        </td>
                                                        <td width="10%">
                                                            <label>
                                                                    Course</label>
                                                        </td>
                                                        <td width="15%">
                                                        <select ng-model="QBCourseId" class="form-control" ng-required="true" ng-change="CourseBasedExamNameFunction();ExamClearfunction()">
                                                        <option value="0">Select</option>
                                                        <option ng-repeat="sel in Courselist" ng-selected="QBCourseId==sel.id" value="{{sel.id}}">{{sel.course}}</option>
                                                        </select>
                                                        </td> 
                                                        <td width="10%">
                                                                <label>
                                                                        Exam Name</label>
                                                            </td>
                                                            <td>
                                                            <select ng-model="QBExamNameId"  class="form-control" ng-required="true" ng-change="ExamBasedSubjectforList()">
                                                            <option value="0">Select</option>
                                                            <option ng-repeat="sel in ExamNameList" ng-selected="QBExamNameId==sel.examnameid" value="{{sel.examnameid}}">{{sel.examname}}</option>
                                                            </select>
                                                            </td>
                                                        </tr>
                                                <tr>                                              
                                                      
                                                       
                                                    <td width="10%">
                                                        <label>
                                                                Subject<font class="mandatory-field" style="color: red;">*</font></label>
                                                                </td>
                                                                <td>
                                                                <select ng-model="QBSubjectId"  class="form-control" ng-required="true">
                                                                <option value="0">Select</option>
                                                                <option ng-repeat="sel in SubjectListObj" value="{{sel.id}}">{{sel.subjectname}}</option>
                                                                </select>
                                                                </td>
                                                                <td width="10%">
                                                                    <label>Paper Type</label>
                                                                </td>
                                                                <td>
                                                                <select ng-model="PaperTypeId"  class="form-control" ng-required="true">
                                                                        <option value="">Select</option>
                                                                        <option ng-repeat="sel in PaperTypeList" ng-selected="PaperTypeId==sel.id" value="{{sel.id}}">{{sel.papertype}}</option>
                                                                        </select>
                                                                </td><td width="10%"> <button type="button" class="btn btn-small"  ng-click="QuestionBanklist()">Go</button>
                                                                </td>
                                                                <td>
                                                                        
                                                                    </td>
                                                                    <td>
                                                                            
                        
                                                                    </td>
                                                                    <td>
                                                                            
                        
                                                                    </td>
                                                
                                            </tr>                
                                        </table>
                                        </form>
                                    </div>
                             </div>
                            </div>
                    <form class="form-horizontal" role="form" name="patientform" id="patientform">
                            
                    <table st-table="emptydata" style="width: 100%" st-safe-src="row" class="table table-striped table-bordered">
                    <thead>
                            <tr style="text-align: center">
                                <th st-ratio="5">
                                        #</th>
                                <!-- <th st-ratio="9">
                                        AcademicYear</th> -->
                                <th st-ratio="8" st-sort="course">
                                    Course</th>
                                <th st-ratio="10" st-sort="mediumname">
                                        Medium</th>
                                <th st-ratio="10" st-sort="examname">
                                        Exam Name</th>
                                <th st-ratio="10" st-sort="subjectname">
                                        Subject</th>
                                <th st-ratio="20" st-sort="papertype">
                                        Paper Type</th>
                                    <th st-ratio="20" st-sort="employeename">
                                        Prepared By</th>
                                <th st-ratio="8">
                                        Action</th>
                            </tr>
                    </thead>
                   <tbody>
                        <tr ng-if="flag1==0 && row==0">
                                <td colspan="9" class="text-center">
                                    No Records Found
                                </td>
                        </tr>
                        <tr ng-repeat="QuestionBank in emptydata">
                                <td style="text-align: right">{{((current_page-1)*page_size)+$index+1}}</td>
                                <!-- <td style="text-align: left">{{QuestionBank.AcademicYear}}</td> -->
                                <td style="text-align: left">{{QuestionBank.course}} </td> 
                                <td style="text-align: left">{{QuestionBank.mediumname}}</td>
                                <td style="text-align: left">{{QuestionBank.examname}}</td>
                                <td style="text-align: left">{{QuestionBank.subjectname}}</td>
                                <td style="text-align: left">{{QuestionBank.papertype}}</td>
                                <td style="text-align: left">{{QuestionBank.employeename}}</td>

                                <td style="text-align: center">
                                    <a href="javascript:" ng-click="ViewQuestionModal(QuestionBank.id)" title="View" ><img src="/img/ViewIcon.png"/></a>                                        
                                    <a href="javascript:" ng-click="QuestionBank.IsActive == 0 ||EditQuestionModal(QuestionBank.id)" title="Edit"><img src="/img/EditIcon.png" ng-if="QuestionBank.isactive==1" /></a>                       
                                    <a href="javascript:" ng-click="ErrorFunction()" title="Edit"><img src="/img/EditIcon.png" ng-if="QuestionBank.isactive==0" /></a>
                                </td>               
                        </tr>
                    </tbody>
                     <tfoot ng-show="row.length >10">
                        <tr>
                             <td colspan="9" class="text-center">
                                <items-page items-On-Page ="itemsOnPage" total-Items="row.length">
                                    </items-page> items per page
                                    <div st-items-by-page="itemsOnPage" st-page-change="rembemberCurrentPage(newPage)"          st-pagination="" st-template="Views/Administration/pagination.custom.html">
                                    </div>
                                            <!--<items-page items-On-Page ="itemsOnPage" total-Items="pagetotalSize"></items-page>-->
                         
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        </div>
        </div>
    </div>
</div>

    <!-- Question Bank Add Modal -->
    <div id="QuesAddModal" class="modal fade" role="dialog">
        <div class="modal-dialog" style="width:70%">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Question Bank</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" role="form" style="font-size:small">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="formControlGroup">
                                <tr ng-hide="Id>0">
                                        <td width="20%">
                                            <label>
                                                    Academic Year<font class="mandatory-field" style="color: red;">*</font></label>
                                        </td>
                                        <td width="20%">
                                        <select ng-model="QBAcademicYear"  class="form-control" ng-required="true" ng-change="AcademicYearBasedCourseForAddmodal();CourseClearFun()">
                                        <option value="0">Select</option>
                                        <option ng-repeat="sel in AcademicYearList" ng-selected="QBAcademicYear==sel.id" value="{{sel.id}}">{{sel.academicyear}}</option>
                                        </select>
                                        </td>
                                        <td width="12%">
                                            <label>
                                                    Course<font class="mandatory-field" style="color: red;">*</font></label>
                                        </td>
                                        <td width="20%">
                                        <select ng-model="QBCourse" class="form-control" ng-required="true" ng-change="CourseBasedExamNameForAddmodal();ExamNameClearFun()"> 
                                        <option value="0">Select</option>
                                        <option ng-repeat="sel in Courselist" ng-selected="QBCourse==sel.id" value="{{sel.id}}">{{sel.course}}</option>
                                        </select>
                                        </td> 
                                        <td width="10%">
                                            <label>
                                                    Medium<font class="mandatory-field" style="color: red;">*</font></label>
                                        </td>
                                        <td>
                                        <select ng-model="QBMedium"  class="form-control" ng-required="true">
                                        <option value="">Select</option>
                                        <option ng-repeat="sel in Mediumlist" ng-selected="QBMedium==sel.id" value="{{sel.id}}">{{sel.mediumname}}</option>
                                        </select>
                                        </td>   
                                        </tr>
                                        <tr ng-show="Id>0">
                                            <td width="20%">
                                                    <label>
                                                Academic Year
                                                </label>
                                            </td>
                                            <td width="20%">
                                                {{ViewAcademicYear}}
                                            </td>
                                            <td width="12%">
                                                    <label>
                                                Course
                                                    </label>
                                            </td>
                                            <td width="12%">
                                                {{ViewCourseName}}
                                            </td>
                                            <td width="10%">
                                                    <label>
                                                Medium
                                            </label>
                                            </td>
                                            <td width="20%">
                                               
                                                {{ViewMediumName}}
                                           
                                            </td>
                                        </tr>
                                        <tr ng-hide="Id>0">           
                                     
                                        <td>
                                                <label>
                                                        Exam Name<font class="mandatory-field" style="color: red;">*</font></label>
                                            </td>
                                            <td>
                                            <select ng-model="QBExamName"  class="form-control" ng-required="true"ng-change="ExamBasedSubjectforAddmodal()">
                                            <option value="0">Select</option>
                                            <option ng-repeat="sel in ExamNameList" ng-selected="QBExamName==sel.id" value="{{sel.examnameid}}">{{sel.examname}}</option>
                                            </select>
                                            </td>     
                                            <td>
                                                <label>
                                                        Subject<font class="mandatory-field" style="color: red;">*</font></label>
                                            </td>
                                            <td>
                                            <select ng-model="QBSubject"  class="form-control" ng-required="true">
                                            <option value="0">Select</option>
                                            <option ng-repeat="sel in SubjectList" ng-selected="QBSubject==sel.id" value="{{sel.id}}">{{sel.subjectname}}</option>
                                            </select>
                                            </td>
                                            <td width="10%">
                                                    <label>
                                                            Paper Type<font class="mandatory-field" style="color: red;">*</font></label>
                                                </td>
                                                <td>
                                                    <select ng-model="PaperType" class="form-control" ng-required="true">
                                                    <option value="">Select</option>
                                                    <option ng-repeat="sel in PaperTypeList" ng-selected="PaperType==sel.id" value="{{sel.id}}">{{sel.papertype}}</option>
                                                    </select>
                                                </td>
                            
                                            </tr>
                                            <tr ng-show="Id>0">
                                                <td>
                                                   Exam Name
                                                </td>
                                                <td>
                                                    {{ViewExamName}}
                                                </td>
                                                <td>
                                                    Subject Name
                                                </td>
                                                <td>
                                                    {{ViewSubject}}
                                                </td>
                                                <td width="10%">
                                                    <label>
                                                            PaperType<font class="mandatory-field" style="color: red;">*</font></label>
                                                </td>
                                                <td>{{ViewPaperType}}
                                                </td>
                                            </tr>
                                            <tr ng-hide="Id>0">
                                                <td>                                                    
                                                </td>
                                                <td>
                                                    <button type="button" class="btn btn-save" ng-click="getQuestionList(ListPaperPatterDetails());">Go</button>
                                                </td>                                              
                                            </tr>
                                            <tr>
                                                <td colspan="4">
                                                    <table style="width: 100%" border="1">      
                                                        <tr>
                                                            <th width="25%">
                                                                Question Paper Section
                                                            </th>
                                                            <th width="25%">
                                                                Number of Questions
                                                            </th>
                                                            <th width="25%">
                                                                Answers
                                                            </th>
                                                            <th width="25%">
                                                                Marks / Question
                                                            </th>
                                                        </tr>                                                 
                                                        <tr ng-repeat="row in PaperPatternchildlist">
                                                            <td width="25%">
                                                                {{row.questionpapersection}}
                                                            </td>
                                                            <td width="25%">
                                                                {{row.numberofquestions}}
                                                            </td>
                                                            <td width="25%">
                                                                {{row.answers}}
                                                            </td>
                                                            <td width="25%">
                                                                {{row.marks}}
                                                            </td>
                                                        </tr>
                                                    </table>

                                                </td>
                                                <td colspan="2">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Question Paper Section<font class="mandatory-field" style="color: red;">*</font></label>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <select ng-model="QBQuestionPaperSection"  class="form-control" ng-required="true" ng-click="GetQuestionNumberList()">
                                                                <option value="0">Select</option>
                                                                <option ng-repeat="sel in PaperPatternchildlist" value="{{sel.id}}">{{sel.questionpapersection}}</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Question No<font class="mandatory-field" style="color: red;">*</font></label>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <select ng-model="QBQuestionNumber"  class="form-control" ng-change="QuestionEnglish()" ng-required="true">
                                                                <option value="0">Select</option>
                                                                <option ng-repeat="sel in QuestionNumberList" value="{{sel.QuestionNumber}}">{{sel.QuestionNumber}}</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <button type="button" class="btn  btn-save" ng-click="NextQuestionSelect()">Next</button>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>                                                
                                                <td valign="top" >  
                                                    <label> 
                                                        Questions<font class="mandatory-field" style="color: red;">*</font> : </label>
                                                </td>
                                            </tr>
                                            <tr>                                                
                                                <td  colspan="6" valign="top" >  
                                                        <p ng-bind-html= "Question_InEnglish">
                                                        </p>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td colspan="6">
                                                    <div ckeditor="options" id="questioncontrol" ng-model="QuestionsList[QBQuestionPaperSection][QBQuestionNumber]" ready="onReady()" rows="10">
                                                    </div>
                                                </td>                                                        
                                            </tr>
                        </table>
                    </form>
                </div>
                <div class="modal-footer" style="text-align:center;">                    
                    <button type="button" class="btn  btn-save" ng-click="QuestionBankHindi_AddEdit()">Save</button>
                    <button type="button" class="btn  btn-save" ng-click="CancelPopup()">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Question Bank View Modal -->
    <div id="QuestionBankViewModal" class="modal fade" role="dialog">
        <div class="modal-dialog" style="width:60%">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Question Bank</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" role="form" style="font-size:small">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="formControlGroup">
                            <tr>
                                <td style="width: 18%">
                                    <label>
                                        Academic Year</label>
                                    </td>
                                    <td style="width:15%">
                                        <span>{{ViewAcademicYear}}</span>                                   
                                    </td>
                                    <td style="width: 12%">
                                        <label>
                                                Course</label>
                                    </td>
                                    <td style="width:15%">
                                    <span>{{ViewCourseName}}</span>
                                    </td> 
                                    <td style="width: 10%">
                                            <label>
                                                    Medium</label>
                                        </td>
                                        <td style="width:15%">
                                        <span>{{ViewMediumName}}</span>                                  
                                        </td>
                                </tr>
                                <tr>         
                                    <td>
                                        <label>
                                            Exam Name</label>
                                    </td>
                                    <td>
                                    <span>{{ViewExamName}}</span>
                                    </td>                                
                                    <td>
                                         <label>
                                            Subject</label>
                                    </td>
                                    <td>
                                        <span>{{ViewSubject}}</span>                                   
                                    </td> 
                                    <td>
                                        <label>Paper Type</label>
                                    </td>
                                    <td>
                                        <span>{{ViewPaperType}}</span>                                   
                                    </td> 
                                </tr>
                                <tr>
                                    <td colspan="6">
                                        <table style="width: 100%;max-height: 500px;" st-table="viewEmptyData" st-safe-src="ViewQuestionList" class="table table-striped table-bordered" >
                                            <thead>
                                                <tr style="text-align: center">
                                                    <th st-ratio="5">
                                                            #</th>
                                                    <th st-ratio="20">
                                                            Section</th>
                                                    <th st-ratio="10">
                                                            Question #</th>
                                                    <th st-ratio="35">
                                                            Question</th>
                                                    <th st-ratio="35">
                                                            Question Hindi</th>
                                                </tr>
                                            </thead>
                                           <tbody>
                                                <tr ng-if="ViewQuestionList.length==0">
                                                    <td colspan="4" class="text-center">
                                                        No Records Found
                                                    </td>
                                                </tr>
                                                <tr ng-repeat="QuestionBank in viewEmptyData">
                                                    <td style="text-align: right">{{((current_page-1)*page_size)+$index+1}}</td>
                                                    <td style="text-align: left">{{QuestionBank.qbquestionpapersection}} </td> 
                                                    <td style="text-align: left">{{QuestionBank.questionno}}</td>
                                                    <td style="text-align: left"><p ng-bind-html="QuestionBank.questions">
                                                    </p>  </td>     
                                                    <td style="text-align: left"><p ng-bind-html="QuestionBank.questionhindi">
                                                    </p>  </td>                                        
                                                </tr>
                                            </tbody>
                                            
                                            <tfoot ng-show="ViewQuestionList.length >5">
                                                <tr>
                                                    <td colspan="9" class="text-center">
                                                        <items-page items-On-Page ="itemsOnPage" total-Items="ViewQuestionList.length">
                                                            </items-page> items per page
                                                            <div st-items-by-page="itemsOnPage" st-page-change="rembemberCurrentPage(newPage)" st-pagination="" st-template="Views/Administration/pagination.custom.html">
                                                            </div>
                                                
                                                    </td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </td>
                                </tr>
                        </table>
                    </form>
                </div>
                <div class="modal-footer" style="text-align:center;">
                    <button type="button" class="btn  btn-save" ng-click="CancelPopup()">Cancel</button>
                </div>
            </div>
        </div>
    </div>
<script>
    $('.panel').addClass('collapse');
    $('#QuestionBank').removeClass('collapse');

    $(function () {
        $('.linetags').click(function () {
            $('.linetags').removeClass('lineActive');
            $(this).addClass('lineActive');

        });
    });
    // CKEDITOR.replace( 'editor1', {
	// 		toolbarLocation: 'top',
	// 		// Remove some plugins that would conflict with the bottom
	// 		// toolbar position.
	// 		removePlugins: 'elementspath,resize'
    //     } );
    function TabClick(item) {
        $('.panel').addClass('collapse');
        $('#' + item).removeClass('collapse');
    }

</script>
<style>
    .addnew {
        margin-top: 10px;
    }
</style>