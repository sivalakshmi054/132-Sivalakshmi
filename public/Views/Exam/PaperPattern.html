<!-- Employee Details Create Page -->
<div class="container">
    <div class="row">
        <div class="lds-ripple" id="chatLoaderPV" style="display: none;z-index:10000"><div></div><div></div></div>


        <div class="col-md-12">

            <div class="mainbody container-fluid">
                <p class="page-title">Question Bank</p>
                <div class="row">
                    <div class="col-md-12 col-lg-12">
                        <div class="lineTab">
                            <a href="javascript:" onclick="TabClick('PaperPattern')" id="A1" class="lineActive linetags">Paper
                                Pattern</a>
                            <a href="javascript:" onclick="TabClick('QuestionBank')" id="A9" class="linetags" ng-click="QuestionBankRedirect()">Question
                                Bank</a>
                        </div>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="panel panel-default" id="PaperPattern">
                            <div class="panel-body">
                                <form class="form-horizontal" role="form">
                                    <table cellpadding="0" cellspacing="0" border="0" width="100%" class="formControlGroup">
                                        <tr>
                                            <td width="12%">
                                                <label>Academic Year<font class="mandatory-field" style="color: red;">*</font></label>
                                            </td>
                                            <td width="20%">
                                                <select ng-model="AcademicYearId" class="form-control" ng-required="true"ng-change="AcademicYearBasedCourseFunction();CourseClearFunction()" >
                                                    <option value="0">Select</option>
                                                    <option ng-repeat="sel in AcademicYearList" ng-selected="AcademicYearId==sel.id"
                                                        value="{{sel.id}}">{{sel.academicyear}}</option>
                                                </select>
                                            </td>
                                            <td width="7%">
                                                <label>Course</label>
                                            </td>
                                            <td width="18%">
                                                <select ng-model="CourseId" class="form-control" ng-required="true"ng-change="CourseBasedExamNameFunction();ExamNameClearFunction()">
                                                    <option value="0">Select</option>
                                                    <option ng-repeat="sel in Filter_Courselist" ng-selected="CourseId==sel.id"
                                                        value="{{sel.id}}">{{sel.course}}</option>
                                                </select>
                                            </td>
                                            <td width="10%">
                                                <label>Exam Name</label>
                                            </td>
                                            <td width="15%">
                                                <select ng-model="ExamNameId" class="form-control" ng-required="true"ng-change="ExamBasedSubject()">
                                                    <option value="0">Select</option>
                                                    <option ng-repeat="sel in Filter_ExamNameList" ng-selected="ExamNameId==sel.examnameid"
                                                        value="{{sel.examnameid}}">{{sel.examname}}</option>
                                                </select>
                                            </td>
                                        </tr>
                                        <tr>
                                          

                                            <td width="10%">
                                                <label>Subject</label>
                                            </td>
                                            <td>
                                                <select ng-model="SubjectId" class="form-control" ng-required="true">
                                                    <option value="0">Select</option>
                                                    <option ng-repeat="sel in Filter_SubjectList" ng-selected="SubjectId==sel.id"
                                                        value="{{sel.id}}">{{sel.subjectname}}</option>
                                                </select>
                                            </td>
                                            <td>
                                                <label>
                                                    Status</label>
                                            </td>
                                            <td>
                                                    <select class="form-control" ng-model="IsActive">
                                                            <option value="-1">All</option>
                                                            <option value="1">Active</option>
                                                            <option value="0">InActive</option>
                                                          
                                                        </select>

                                            </td>
                                            <td width="10%"> <button type="button" title="Click to List the Records" class="btn btn-small" ng-click="PaperPatternlist()">Go</button>
                                            </td>
                                            <td width="10%">

                                            </td>
                                            <td width="15%">

                                            </td>
                                        </tr>
                                    </table>
                                </form>
                            </div>


                            <a href="javascript:" title="Click to Add new Record" ng-click="AddModal(ClearPopup())" class="btn btn-autosize pull-right mb-15"
                                style="margin-top:10px;">Add New</a>

                            <form class="form-horizontal" role="form" name="patientform" id="patientform">
                                <table  cellpadding="0" padding-bottom="25px;" cellspacing="10%" st-table="emptydata" style="width: 100%" st-safe-src="rowcollection" class="table table-striped table-bordered">
                                    <thead>
                                        <tr style="text-align: center">
                                            <th st-ratio="5" st-sort="">
                                                    #</th>
                                          
                                            <th st-ratio="7" st-sort="Course">
                                                                Course</th>
                                            <th st-ratio="7" st-sort="MediumName">
                                                                Medium</th>
                                            <th st-ratio="10" st-sort="ExamName">
                                                             ExamName</th>
                                            <th st-ratio="10" st-sort="SubjectName">
                                                    Subject</th>
                                            <th st-ratio="10">
                                                    Question Paper Section</th>
                                            <th st-ratio="10">
                                                    No. of Questions</th>
                                                    <th st-ratio="10">Answers</th>
                                                <th st-ratio="10">Mark/Question</th>
                                            <th st-ratio="8">
                                                    Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-if="flag==0 && rowcollection==0">
                                            <td colspan="10" class="text-center">
                                                No Records Found
                                            </td>
                                        </tr>
                                    </tr>
                                    <tr ng-repeat="PaperPattern in emptydata">
                                            <td style="text-align: right">{{((current_page-1)*page_size)+$index+1}}</td>
                                            <td style="text-align: left">{{PaperPattern.course}} </td>
                                            <td style="text-align: left">{{PaperPattern.mediumname}} </td>
                                            <td style="text-align: left">{{PaperPattern.examname}}</td>
                                            <td style="text-align: left">{{PaperPattern.subjectname}}</td>
                                      
                                            
                                            <td style="text-align: left" colspan="4">
                                                <table style="width: 100%">
                                                        
                                                    <tr ng-repeat="row in PaperPatternchildlist  | filter : {paperpatterenid : PaperPattern.id} : true">
                                                        <td width="25%">
                                                            {{row.questionpapersection}}
                                                        </td>
                                                        <td width="25%">
                                                            {{row.numberofquestions}}
                                                        </td>
                                                        <td width="25%">
                                                            {{row.answers}}
                                                        </td>
                                                        <td width="25%">
                                                            {{row.marks}}
                                                        </td>
                                                    </tr>
                                                </table>
                                            </td>
                                            <td style="text-align: center">
                                                <a href="javascript:" ng-click="ViewModal(PaperPattern.id)" title="View"><img
                                                        src="/img/ViewIcon.png" /></a>
                                                <a href="javascript:" ng-click="PaperPattern.isactive == 0 ||EditModal(PaperPattern.id)"
                                                    title="Edit"><img src="/img/EditIcon.png" ng-if="PaperPattern.isactive==1" /></a>
                                                <a href="javascript:" ng-click="ErrorFunction()" title="Edit"><img src="/img/EditIcon.png"
                                                        ng-if="PaperPattern.isactive==0" /></a>
                                                <a href="javascript:" ng-click="InActive(PaperPattern.id)" title="Active"><img
                                                        src="/img/ActiveIcon.png" ng-if="PaperPattern.isactive==1" /></a>
                                                <a href="javascript:" ng-click="Active(PaperPattern.id)" title="Inactive"><img
                                                        src="/img/InActiveIcon.png" ng-if="PaperPattern.isactive==0" /></a>
                                            </td>
                                        </tr>
                                    <!-- </tbody> -->
                                    <!-- <tfoot ng-show="ItemList.length >30">
                    <tr>
                        <td colspan="7" class="text-center">
                            <div st-items-by-page="30" st-page-change="rembemberCurrentPage(newPage)" st-pagination="" st-template="pagination.custom.html"></div>
                        </td>
                    </tr>
                </tfoot> -->
                                    <tfoot ng-show="rowcollection.length >10">
                                        <tr>
                                            <td colspan="10" class="text-center">
                                                <items-page items-On-Page="itemsOnPage" total-Items="rowcollection.length"></items-page>
                                                items per page
                                                <div st-items-by-page="itemsOnPage" st-page-change="rembemberCurrentPage(newPage)"
                                                    st-pagination="" st-template="Views/Administration/pagination.custom.html"></div>
                                                <!--<items-page items-On-Page ="itemsOnPage" total-Items="pagetotalSize"></items-page>-->
                                            </td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </form>
                        </div>
                        <div id="PaperPatternViewModal" class="modal fade" role="dialog">
                            <div class="modal-dialog" style="width:60%">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">Paper Pattern</h4>
                                    </div>
                                    <div class="modal-body">
                                        <form class="form-horizontal" role="form" style="font-size:small">
                                            <table cellpadding="0" cellspacing="0" border="0" width="100%" class="formControlGroup">
                                                <tr>
                                                    <td  width="17%">
                                                        <label>
                                                        Academic Year </label>
                                                    </td>
                                                    <td width="17%">
                                                        <span>{{ViewAcademicYear}}</span>
                                                    </td>
                                                    <td style="width: 15%">
                                                            <label>
                                                                    Course</label>
                                                        </td>
                                                        <td >
                                                            <span>{{ViewCourse}}</span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                    <td >
                                                        <label>
                                                                Medium</label>
                                                    </td>
                                                    <td >
                                                        <span>{{ViewMediumName}}</span>
                                                    </td>
                                                
                                                   
                                                    <td >
                                                        <label>
                                                                Exam Name</label>
                                                    </td>
                                                    <td >
                                                        <span>{{ViewExamName}}</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <label>
                                                                Subject</label>
                                                    </td>
                                                    <td >
                                                        <span>{{ViewSubject}}</span>
                                                    </td>
                                                </tr>
                                                <form class="form-horizontal" role="form" name="patientform" id="feedetailsform">
                                                    <table st-table="emptydatas" style="width: 100%" st-safe-src="AddQuestions"
                                                        class="table table-striped table-bordered">
                                                        <thead>


                                                            <tr style="text-align: center">
                                                                <th st-ratio="7">
                                                                        #</th>
                                                                <th st-ratio="20" st-sort="">
                                                                        Question Paper Section</th>
                                                                <th st-ratio="10" st-sort="">
                                                                        No. of Questions</th>
                                                                <th st-ratio="10" st-sort="">
                                                                        Answers</th>
                                                                <th st-ratio="10" st-sort="">
                                                                        Mark/Question</th>
                                                                <th st-ratio="45" st-sort="">
                                                                        Remarks</th>

                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-if="flag1==0 && AddQuestions.length==0">
                                                                <td colspan="9" class="text-center">
                                                                    No Records Found
                                                                </td>
                                                            </tr>
                                                            <tr ng-repeat="rows in AddQuestions">
                                                                <td style="text-align: right">{{((current_page-1)*page_size)+$index+1}}</td>
                                                                <td style="text-align: left">
                                                                    {{rows.questionpapersection}}</td>
                                                                <td style="text-align: left">
                                                                    {{rows.numberofquestions}}</td>
                                                                <td style="text-align: left"><span>{{rows.answers}}</span></td>
                                                                <td style="text-align: left">{{rows.marks}}</td>
                                                                <td style="text-align: left">{{rows.remarks}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </form>
                                            </table>
                                        </form>
                                    </div>
                                    <div class="modal-footer" style="text-align:center;">
                                        <button type="button" class="btn  btn-save" title="Click to Cancel"  ng-click="CancelPopup()">Cancel</button>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!-- Add Packages Modal -->
                        <div id="PaperPatternAddModal" class="modal fade" role="dialog">
                            <div class="modal-dialog"style="width:60%">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">Paper Pattern</h4>
                                    </div>
                                    <div class="modal-body">
                                        <form class="form-horizontal" role="form" style="font-size: small">
                                            <table cellpadding="0" cellspacing="0" border="0" width="100%" class="formControlGroup">
                                                <tr ng-hide="Id>0">
                                                    <td width="15%">
                                                        <label>
                                                                Academic Year<font class="mandatory-field" style="color: red;">*</font></label>
                                                    </td>
                                                    <td>
                                                        <select ng-model="AcademicYear" class="form-control"style="width:200px;"
                                                            ng-required="true"ng-change="AcademicYearBasedCourseForAddmodal();CourseClearFun()">
                                                            <option value="0">Select</option>
                                                            <option ng-repeat="sel in AcademicYearList" ng-selected="AcademicYear==sel.id"
                                                                value="{{sel.id}}">{{sel.academicyear}}</option>
                                                        </select>
                                                    </td>
                                              
                                                    <td width="12%">
                                                        <label>
                                                                Course<font class="mandatory-field" style="color: red;">*</font></label>
                                                    </td>
                                                                                           
                                                        <td>
                                                            <select ng-model="Course" class="form-control" ng-required="true" style="width:200px;"ng-change="CourseBasedExamNameForAddmodal();ExamNameClearFun()">
                                                                <option value="0">Select</option>
                                                                <option ng-repeat="sel in Courselist" ng-selected="Course==sel.id"
                                                                    value="{{sel.id}}">{{sel.course}}</option>
                                                            </select>
                                                        </td>
                                                    </td>
                                                </tr>
                                                <tr ng-hide="Id>0">
                                                    <td>
                                                        <label>
                                                                Medium<font class="mandatory-field" style="color: red;">*</font></label>
                                                    </td>
                                                    <td>
                                                        <select ng-model="MediumName" class="form-control" style="width:200px;"ng-required="true">
                                                            <option value="0">Select</option>
                                                            <option ng-repeat="sel in Medium_list" ng-selected="MediumName==sel.id"
                                                                value="{{sel.id}}">{{sel.mediumname}}</option>
                                                        </select>
                                                    </td>
                                                
                                                    <td>
                                                        <label>
                                                                Exam Name<font class="mandatory-field" style="color: red;">*</font></label>
                                                    </td>
                                                    <td>
                                                        <select ng-model="ExamName" class="form-control" style="width:200px;"ng-required="true"ng-change="ExamBasedSubjectforAddmodal()">
                                                            <option value="0">Select</option>
                                                            <option ng-repeat="sel in ExamNameList" ng-selected="ExamName==sel.id"
                                                                value="{{sel.examnameid}}">{{sel.examname}}</option>
                                                        </select>
                                                    </td>
                                                </tr>
                                                <tr ng-hide="Id>0">
                                                    <td>
                                                        <label>
                                                                Subject<font class="mandatory-field" style="color: red;">*</font></label>
                                                    </td>
                                                    <td>
                                                        <select ng-model="SubjectName" class="form-control" style="width:200px;"ng-required="true">
                                                            <option value="0">Select</option>
                                                            <option ng-repeat="sel in SubjectList" ng-selected="SubjectName==sel.id"
                                                                value="{{sel.id}}">{{sel.subjectname}}</option>
                                                        </select>
                                                    </td>
                                                </tr>

                                                <tr ng-show="Id>0">
                                                        <td  width="17%">
                                                            <label>
                                                                    Academic Year </label>
                                                        </td>
                                                        <td width="17%">
                                                            <span>{{ViewAcademicYear}}</span>
                                                        </td>
                                                        <td style="width: 15%">
                                                                <label>
                                                                        Course</label>
                                                            </td>
                                                            <td >
                                                                <span>{{ViewCourse}}</span>
                                                            </td>
                                                        </tr>
                                                        <tr ng-show="Id>0">
                                                        <td >
                                                            <label>
                                                                    Medium</label>
                                                        </td>
                                                        <td >
                                                            <span>{{ViewMediumName}}</span>
                                                        </td>
                                                    
                                                       
                                                        <td >
                                                            <label>
                                                                    Exam Name</label>
                                                        </td>
                                                        <td >
                                                            <span>{{ViewExamName}}</span>
                                                        </td>
                                                    </tr>
                                                    <tr ng-show="Id>0">
                                                        <td>
                                                            <label>
                                                                    Subject</label>
                                                        </td>
                                                        <td >
                                                            <span>{{ViewSubject}}</span>
                                                        </td>
                                                    </tr>
                                                </table>
                                               
                                   <tr>
                                      
                                       
                                        <form class="form-horizontal" role="form">
                                                <div class="modal-body tab" style="overflow-y:auto ; height:250px;">
                                                <table class="table table-striped table-bordered" template-pagination="custom/pager"
                                                    style="margin-bottom:5px !important">
                                                    <thead>
                                                        <tr style="text-align: center">
                                                            <th st-ratio="8">
                                                                    #</th>
                                                            <th st-ratio="15">
                                                                    Question Paper Section</th>
                                                            <th st-ratio="15">
                                                                    No. of Questions</th>
                                                            <th st-ratio="10">
                                                                    Answers</th>
                                                            <th st-ratio="10">
                                                                    Mark/Question</th>
                                                            <th st-ratio="30">
                                                                    Remarks</th>
                                                            <th st-ratio="10">
                                                                    Action</th>

                                                        </tr>
                                                    </thead>

                                                    <tbody>
                                                        <tr ng-if="AddQuestions.length==0">
                                                            <td colspan="8" style="text-align: center">
                                                                No Records Found
                                                            </td>
                                                        </tr>
                                                        <tr style="text-align: center" ng-repeat="row in AddQuestions">

                                                            <td style="text-align: right">{{((current_page-1)*page_size)+$index+1}}</td>
                                                            <td width="25%" align="center">

                                                                <select class="form-control" ng-model="row.questionpapersectionid"
                                                                    ng-options="sel.id as sel.questionpapersection for sel in QuestionSectionList">
                                                                    <option value="">Select</option>

                                                                </select>

                                                                <!-- <select ng-model="row.QuestionpaperSectionId" class="form-control" ng-required="true" style="width:140px;">
                                                                    <option value="">Select</option>
                                                                    <option ng-repeat="sel in QuestionSectionList" ng-selected="row.QuestionpaperSectionId==sel.Id" value="{{sel.Id}}">{{sel.QuestionPaperSection}}</option>
                                                                </select>    -->


                                                            </td>
                                                            <td width="5%">

                                                                <input type="text" class="form-control" name="Days"
                                                                    ng-model="row.numberofquestions" ng-init="NumberofQuestions=''"
                                                                    id="inputDays" placeholder="" ng-maxlength="20"
                                                                    maxlength="20" onkeypress="varifyNumberPositive(this.NumberofQuestions)">

                                                            </td>
                                                            <!-- <td width="25%">
                
                                                            <input type="text" class="form-control" name="Days" ng-model="row.NumberofQuestions" ng-init="NumberofQuestions=''" id="inputDays" placeholder="" ng-maxlength="100" maxlength="100">
            
                                                        </td> -->
                                                            <td width="7%">

                                                                <input type="text" class="form-control" name="Days"
                                                                    ng-model="row.answers" ng-init="Answers=''" id="inputDays"
                                                                    placeholder="" ng-maxlength="20" maxlength="20"
                                                                    onkeypress="varifyNumberPositive(this.Answers)">

                                                            </td>
                                                            <td width="7%">

                                                                <input type="text" class="form-control" name="Days"
                                                                    ng-model="row.marks" ng-init="Marks=''" id="inputDays"
                                                                    placeholder="" ng-maxlength="20" maxlength="20"
                                                                    onkeypress=" Numberdot(this.Marks)">

                                                            </td>

                                                            <td width="50%" align="center">

                                                                    <textarea class="form-control" id="Text6" name="LastName" ng-model="row.remarks"
                                                                    placeholder="" ng-required="true" ng-maxlength="250"
                                                                    maxlength="250"></textarea>

                                                                <!-- </td>
                                                                    <td style="text-align: center"><input type="checkbox" ng-model="row.selectedPre" /></td> -->
                                                            <td><input type="image" src="/img/deleteIcon.png" title='Click to delete'
                                                                    ng-click="RemovePrevious_Item($index)" ng-model="row.selectedPre"
                                                                    style="width: 20px;" id="Image4" /></td>
                                                        </tr>
                                                    </tbody>
                                                </table>

                                            <a href="javascript:" ng-click="QuestionsSave()">|Add|</a>
                                     
                                            </form>
                                        </td>
                                       
                                    </table>
                                </tr>
                            </table>


                                                                               </form>
                                    </div>

                                    <div class="modal-footer" style="text-align: center;">
                                        <button type="button" title="Click to Save the Records"  class="btn  btn-save" ng-click="PaperPattern_AddEdit()">Save</button>
                                        <button type="button" class="btn  btn-save" title="Click to Cancel"   ng-click="CancelPopup()">Cancel</button>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        $('.panel').addClass('collapse');
        $('#PaperPattern').removeClass('collapse');

        $(function () {
            $('.linetags').click(function () {
                $('.linetags').removeClass('lineActive');
                $(this).addClass('lineActive');

            });
        });

        function TabClick(item) {
            $('.panel').addClass('collapse');
            $('#' + item).removeClass('collapse');
        }
        $('.input-group.date').datepicker({
            format: "dd/M/yyyy",
            forceParse: false,
            autoclose: true,
            todayHighlight: true,
            toggleActive: true,
            todayBtn: true

        });
    </script>

    <style>
        .addnew {
            margin-top: 10px;
        }
    </style>