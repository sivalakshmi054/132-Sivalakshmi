
<div class="container">
    <div class="row"  ng-init="AcademicYearBasedCourseFunction();Insert_AcademicYearBasedCourseFunction()">
        <div class="lds-ripple" id="chatLoaderPV" style="display: none;z-index:10000"><div></div><div></div></div>
        <div class="col-md-12">
            <!-- <p class="page-title nopadding">Exam Time Table</p> -->
        </div>
        <div class="col-md-12">
               <div><p class="page-title">Exam Time Table<sub>
                   <input type="image" src="/img/collapse.gif" title='Click to Collapse' onclick="return divcollapse('tableid', 'tableid_img')" style="width: 20px;" id="tableid_img"></sub></p></div>
                            <div class="panel panel-default" id="tableid"> 
            <div class="panel panel-default">
                <div class="panel-body">
                    <form class="form-horizontal" role="form">
                        <table cellpadding="0" cellspacing="0" border="0" width="100%" class="formControlGroup">
                            <tr>
                                <td width="10%">
                                    <label>Academic Year<font class="mandatory-field" style="color: red;">*</font></label>
                                </td>
                                <td width="15%">
                                    <select ng-model="AcademicYearId" class="form-control" ng-required="true" ng-change="AcademicYearBasedCourseFunction();CourseClearFunction()">
                                        <option value="0">Select</option>
                                        <option ng-repeat="sel in AcademicYearList" ng-selected="AcademicYearId==sel.id" value="{{sel.id}}">{{sel.academicyear}}</option>
                                    </select>
                                </td>
                                <td width="10%">
                                    <label>Course</label>
                                </td>
                                <td width="15%">
                                    <select ng-model="CourseId" class="form-control" ng-required="true"ng-change="CourseBasedExamNameFunction();ExamNameClearFunction()">
                                        <option value="0">Select</option>
                                        <option ng-repeat="sel in Courselist" ng-selected="CourseId==sel.id" value="{{sel.id}}">{{sel.course}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td width="10%">
                                    <label>Exam Name</label>
                                </td>
                                <td width="15%">
                                    <select ng-model="ExaminationId" class="form-control" ng-required="true" ng-change="ExamBasedSubjectFunction();ExamBasedSubjectClearFunction()">
                                        <option value="0">Select</option>
                                        <option ng-repeat="sel in ExamNameList" ng-selected="ExaminationId==sel.id" value="{{sel.examnameid}}">{{sel.examname}}</option>
                                    </select>
                                </td>
                                <td width="10%">
                                    <label>Subject Name</label>
                                </td>
                                <td width="15%">
                                    <select ng-model="SubjectId" class="form-control" ng-required="true">
                                        <option value="0">Select</option>
                                        <option ng-repeat="sel in Filter_SubjectList" ng-selected="SubjectId==sel.id" value="{{sel.id}}">{{sel.subjectname}}</option>
                                    </select>
                                </td>
                                <td width="30%">
                                        <button type="button" class="btn btn-small" title="Click to List the Records" ng-click="ExamTimeTableSearchlist()">Go</button>
                                    </td>
                            </tr>
                         
                        </table>
                    </form>
                </div>
            </div>
            </div>
            <form class="form-horizontal" role="form" name="patientform" id="feeform">

            <a href="javascript:" ng-click="AddModal(ClearPopup())" title="Click to Add new Record" class="btn btn-autosize addnew pull-right mb-15">Add New</a>
        </form>
        <form class="form-horizontal" role="form" name="patientform" id="feedetailsform">
      
    <!-- <div class="row">
        <div class="col-md-12"> -->
            <table st-table="emptydata" style="width: 100%" st-safe-src="ExamTimeTableSearchlist" class="table table-striped table-bordered">
                <thead>
                    <tr style="text-align: center">
                        <th st-ratio="7">Sl No.</th>
                        <th st-ratio="10">Course</th>
                        <th st-ratio="10">Exam Name</th>
                        <th st-ratio="12">Subject Name</th>
                        <th st-ratio="11">Exam Date</th>
                        <th st-ratio="10">Start Time</th>
                        <th st-ratio="11">End Time</th>
                       
                        <th st-ratio="21">Remarks</th>
                        <th st-ratio="8">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-if="flag==0 && ExamTimeTablelist.length==0">
                        <td colspan="9" class="text-center">
                            No Records Found
                        </td>
                    </tr>
                    <tr ng-repeat="ExamTimeTable in ExamTimeTablelist" >    
                            <td style="text-align: right">{{((current_page-1)*page_size)+$index+1}}</td>
                            <td style="text-align: left">{{ExamTimeTable.course}}</td>
                            <td style="text-align: left">{{ExamTimeTable.examination}}</td> 
                          
                            <td colspan="5">
                                <table style="width: 100%" >
                                 <tr ng-repeat="row in ExamTimeTableSearchlistChild | filter : {examtimetableid : ExamTimeTable.id}">                                     
                                        <td width="17%"> 
                                                {{row.subjectname}}
                                        </td>
                                        <td width="15%">
                                            {{row.examdate|date:'dd-MMM-yyyy'}}
                                    </td>
                                        <td width="17%">
                                                {{Convert24to12Timeformat(row.starttime)}}
                                               
                                        </td>
                                        <td width="16%">
                                                {{Convert24to12Timeformat(row.endtime)}}
                                        </td>
                                      
                                        <td width="30%">
                                              <div class="textwrap"> {{row.remarks}}</div> 
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            
                           
                        <td style="text-align: center">
                            <a href="javascript:" ng-click="ViewModal(ExamTimeTable.id)" title="View">
                                <img src="/img/ViewIcon.png" />
                            </a>

                            <a href="javascript:" ng-click="ExamTimeTable.isactive == 0 ||EditModal(ExamTimeTable.id)" title="Edit">
                                <img src="/img/EditIcon.png" ng-if="ExamTimeTable.isactive==1" />
                            </a>

                            <a href="javascript:" ng-click="ErrorFunction()" title="Edit">
                                <img src="/img/EditIcon.png" ng-if="ExamTimeTable.isactive==0" />
                            </a>

                            <a href="javascript:" ng-click="InActive(ExamTimeTable.id)" title="Active">
                                <img src="/img/ActiveIcon.png" ng-if="ExamTimeTable.isactive==1" />
                            </a>

                            <a href="javascript:" ng-click="Active(ExamTimeTable.id)" title="Inactive">
                                <img src="/img/InActiveIcon.png" ng-if="ExamTimeTable.isactive==0" />
                            </a>
                        </td>
                    </tr>
                </tbody>
                <tfoot ng-show="ExamTimeTablelist.length >10">
                    <tr>
                        <td colspan="10" class="text-center">
                            <items-page items-On-Page ="itemsOnPage" total-Items="ExamTimeTablelist.length"></items-page> items per page
                            <div st-items-by-page="itemsOnPage" st-page-change="rembemberCurrentPage(newPage)" st-pagination="" st-template="Views/Administration/pagination.custom.html"></div>
                            <!--<items-page items-On-Page ="itemsOnPage" total-Items="pagetotalSize"></items-page>-->
            
                        </td>
                    </tr>
                </tfoot>

                </table>
                </form>
                </div>
                
            </div>
        </div>
    </div>
   
           
            <div style="text-align:center;">
                <button type="button" class="btn  btn-save"title="Click to Print"  ng-click="CancelPopup()">Print</button>
            </div>
  
<!-- Add/Edit Modal -->
<div id="ExamTimeTableAddModal" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width: 65%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Exam Time Table</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" role="form">
                    <table cellpadding="0" cellspacing="0" border="0" width="100%" class="formControlGroup">
                            <tr ng-hide="Id>0">
                                    <td width="12%">
                                        <label>Academic Year<font class="mandatory-field" style="color: red;">*</font></label>
                                    </td>
                                    <td width="15%">
                                    <select ng-model="AcademicYear"  class="form-control" ng-required="true" ng-change="Insert_AcademicYearBasedCourseFunction();CourseClearFunction()">
                                    <option value="0">Select</option>
                                    <option ng-repeat="sel in AcademicYearList" ng-selected="AcademicYear==sel.id" value="{{sel.id}}">{{sel.academicyear}}</option>
                                    </select>
                                    </td>
                                    </tr>

                                    <tr ng-hide="Id>0">
                            <td>
                                <label>Course
                                    <font class="mandatory-field" style="color: red;">*</font>
                                </label>
                            </td>
                            <td>
                                <select ng-model="Course" class="form-control" ng-change="Insert_CourseBasedExamNameFunction();ExamNameClearFunction()">
                                    <option value="0">Select</option>
                                    <option ng-repeat="sel in Courselist" ng-selected="Course==sel.id" value="{{sel.id}}">{{sel.course}}</option>
                                </select>
                            </td>
                        </tr>
                        <tr ng-hide="Id>0">
                            <td>
                                <label>Exam Name
                                    <font class="mandatory-field" style="color: red;">*</font>
                                </label>
                            </td>
                            <td>                                
                                <select ng-model="Examination" class="form-control" ng-change="SubjectClearFunction()"> 
                                    <option value="0">Select</option>
                                    <option ng-repeat="sel in ExamNameList" value="{{sel.examnameid}}">{{sel.examname}}</option>
                                </select>
                            </td>
                            <td width="30%">
                                <button type="button" class="btn btn-small" title="Click to List the Records" ng-click="Insert_ExamBasedSubjectFunction()">Go</button>
                            </td>
                        </tr>
                        <tr ng-show="Id>0">
                            <td width="15%">
                                <label>Academic Year</label>
                            </td>
                            <td width="15%">
                                <span>
                          {{ViewAcademicYear}}
                        </span>
                            </td>
                            </tr>

                            <tr ng-show="Id>0">
                    <td>
                        <label>Course
            
                        </label>
                    </td>
                    <td>
                        <span>
                       {{ViewCourse}}
                    </span>
                    </td>
                    </tr>
                    <tr ng-show="Id>0">
                    <td>
                        <label>Examination
                           
                        </label>
                    </td>
                    <td>
                        <span>
                       {{ViewExamination}}
                    </span>
                    </td>
                 <td width="20%"></td>
                </tr>
                    </table>
                </form>
            </div>

                       
                                    <div class="col-md-12">
                                        <table st-table="emptydata" style="width: 100%" st-safe-src="SubjectList" class="table table-striped table-bordered">
                                            <thead>
                                                <tr style="text-align: center">
                                                    <th st-ratio="10">Sl No.</th>
                                                    <th st-ratio="20">Subject</th>
                                                    <th st-ratio="10">Exam Date</th>
                                                    <th st-ratio="10">Start Time</th>
                                                    <th st-ratio="10">End Time</th>
                                                   
                                                    <th st-ratio="40">Remarks</th>
                                                </tr>
                                            </thead>
                                           
                                            <tbody>
                                                    <tr ng-if="flag4==0 && SubjectList==0">
                                                            <td colspan="9" class="text-center">
                                                                No Records Found
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                        <tr ng-repeat="row in SubjectList">
                                        <td style="text-align: right">{{((current_page-1)*page_size)+$index+1}}</td>
                                        <td style="text-align: left" ng-show="row.parentsubject==null">
                                             {{row.subjectname}}
                                           
                                        </td>
                                        
                                        <td style="text-align: left" ng-show="row.parentsubject!=null">
                                                {{row.parentsubject}} -  {{row.subjectname}}
                                               
                                            </td>
                                            <td>
                                                <input type="text" datepicker ng-model="row.examdate" />
                                        </td>
                                        <td>
                                            <input type="time" ng-model="row.starttime" ng-init="StartTime=''" ng-change="CopyStartTime()">
                                    </td>
                                    <td>
                                        <input ng-model="row.endtime" type="time">
                                  
                                    </td>
                                   
                                <td>
                                <textarea rows="3" id="Textarea2" class="form-control" ng-model="row.remarks" placeholder="" ng-maxlength="250"
                                    maxlength="250"></textarea>
                            </td>
                     </tr>
                   </tbody>
                        </table>
                    </div>
    <div class="modal-footer" style="text-align:center;">
        <button type="button" class="btn  btn-save" title="Click to Save the Records"  ng-click="ExamTimetable_AddEdit()">Save</button>
        <button type="button" class="btn  btn-save" title="Click to Cancel"  ng-click="CancelPopup()">Cancel</button>
    </div>


</div>
</div>
</div>


<!-- Exam TimeTable View -->
<div id="ExamTimeTableViewModal" class="modal fade" role="dialog">
<div class="modal-dialog" style="width: 60%">
<div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Exam Time Table</h4>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" role="form" style="font-size:small">
            <table cellpadding="0" cellspacing="0" border="0" width="100%" class="formControlGroup">
                <tr>
                    <td style="width: 10%">
                        <label>Academic Year</label>
                    </td>
                    <td style="width:20%">
                        <span>{{ViewAcademicYear}}</span>
                    </td>
</tr>
<tr>
                    <td style="width: 10%">
                        <label>Course</label>
                    </td>
                    <td style="width:20%">
                        <span>{{ViewCourse}}</span>
                    </td>
                </tr>
                <tr>
                            <td style="width: 10%">
                                <label>Examination</label>
                            </td>
                            <td style="width:20%">
                                <span>
                                   {{ViewExamination}}</span>
                                
                            </td>
        
                </tr>
                <form class="form-horizontal" role="form"id="feedetailsform">
                        <table st-table="emptydata" style="width: 100%" st-safe-src="SubjectList" class="table table-striped table-bordered">
                            <thead>
                                    <tr style="text-align: center">
                                            <th st-ratio="5">Sl No.</th>
                                            <!-- <th st-ratio="20" st-sort="">Exam</th> -->
                                            <th st-ratio="15" st-sort="">Subject</th>
                                            <th st-ratio="15" st-sort="">Exam Date</th>
                                            <th st-ratio="15" st-sort="">Start Time</th> 
                                            <th st-ratio="15" st-sort="">End Time</th>
                                            
                                            <th st-ratio="20" st-sort="">Remarks</th>
                                                                                                     
                                        </tr>
                                    </thead>
                                    <tbody>
                                            <tr ng-if="flag2==0 && ViewSubjectList.length==0">
                                                <td colspan="9" class="text-center">
                                                    No Records Found
                                                </td>
                                            </tr>
                                            <tr ng-repeat="rows in ViewSubjectList">                 
                                                
                                                <td style="text-align: right">{{((current_page-1)*page_size)+$index+1}}</td>
                                                    <!-- <td style="text-align: left">{{rows.Examination}}</td> -->
                                                    <td style="text-align: left"><span>{{rows.subjectname}}</span></td>
                                                    <td style="text-align: left">{{rows.examdate|date:'dd-MMM-yyyy'}}</td>
                                                     <td style="text-align: left">
                                                           {{rows.ViewStartTime}}
                                                        </td> 
                                                    <td style="text-align: left">
                                                          {{rows.ViewEndTime}}
                                                    </td>
                                                  
                                                    <td style="text-align: left"><div class="textwrap">{{rows.remarks}}</div></td>
                                                        <!-- <input type="textbox"ng-model="row.FeeAmount"></td> -->
                                                    </tr>
                                                    </tbody>
                                                    </table>
                                                    </form>
                                                    </table>
                                                    </form>
                                                    </div>
                                                    <div class="modal-footer" style="text-align:center;">
                                                            <button type="button" class="btn btn-save" title="Click to Cancel"  ng-click="CancelPopup()">Cancel</button>
                                                        </div>
                                                    </div>
                                                    </div>
                                                    </div>
                                                    

     
<script>
    $('.input-group.date').datepicker({
        format: "dd-M-yyyy",
        forceParse: false,
        autoclose: true,
        todayHighlight: true,
        toggleActive: true,
        todayBtn: true
    });
</script>
<style>
        .addnew{
            margin-top:10px;
        }
       </style>